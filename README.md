# SwaggerClient-php
The Talon.One API is used to manage applications and campaigns, as well as to integrate with your application. The operations in the _Integration API_ section are used to integrate with our platform, while the other operations are used to manage applications and campaigns.  ### Where is the API?  The API is available at the same hostname as these docs. For example, if you are reading this page at `https://mycompany.talon.one/docs/api/`, the URL for the [updateCustomerProfile][] operation is `https://mycompany.talon.one/v1/customer_profiles/id`  [updateCustomerProfile]: #operation--v1-customer_profiles--integrationId--put

This PHP package was automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen) project:

- API version: 1.0.0
- Build package: io.swagger.codegen.languages.PhpClientCodegen

## Requirements

PHP 5.5 and later

## Installation & Usage
### Composer

To install the bindings via [Composer](http://getcomposer.org/), add the following to `composer.json`:

```
{
  "repositories": [
    {
      "type": "git",
      "url": "https://github.com/GIT_USER_ID/GIT_REPO_ID.git"
    }
  ],
  "require": {
    "GIT_USER_ID/GIT_REPO_ID": "*@dev"
  }
}
```

Then run `composer install`

### Manual Installation

Download the files and include `autoload.php`:

```php
    require_once('/path/to/SwaggerClient-php/vendor/autoload.php');
```

## Getting Started

You can find this same code under `example.php`. Fine tune credentials and start reporting events to the Integration API.

```php
<?php

require_once(__DIR__ . '/vendor/autoload.php');
require_once(__DIR__ . '/lib/utils/generators.php');

// ---- modify accordingly ----
$config = Swagger\Client\Configuration::getDefaultConfiguration()->setHost('http://localhost:9000');
$config->setApplicationId('1');
$config->setApiKey('Authorization', 'ff164d01c11d9571');

$apiInstance = new Swagger\Client\Api\IntegrationAPIApi( new GuzzleHttp\Client(), $config);

// ----- create a customer profile
try {
    $result = $apiInstance->updateCustomerProfile(generateStr());
    $profileId = $result->getProfile()->getIntegrationId();
    echo("profile created:\t\t" . $profileId . "\n");
} catch (Exception $e) {
    echo 'Exception when calling IntegrationAPIApi->updateCustomerProfile: ', $e->getMessage(), PHP_EOL;
}

// ----- updates the created customer profile with a valid attribute
try {
    $result = $apiInstance->updateCustomerProfile($profileId, "{\"attributes\": {\"Name\": \"John McClient\"}}");
    echo("profile updated with name:\t" . $result->getProfile()->getAttributes()["Name"] . "\n");
} catch (Exception $e) {
    echo 'Exception when calling IntegrationAPIApi->updateCustomerProfile: ', $e->getMessage(), PHP_EOL;
}

// ----- create a new customer session (associated with $profileId)
$customerSessionBody = new Swagger\Client\Model\NewCustomerSession();
$customerSessionBody->setProfileId($profileId);
try {
    $result = $apiInstance->updateCustomerSession($profileId . '_session', $customerSessionBody);
    $sessionId = $result->getSession()->getIntegrationId();
    echo("session created:\t\t" . $sessionId . "\n");
} catch (Exception $e) {
    echo 'Exception when calling IntegrationAPIApi->updateCustomerSession: ', $e->getMessage(), PHP_EOL;
}

// ---- closes the previous opened session
$customerSessionBody->setState('closed');
try {
    $result = $apiInstance->updateCustomerSession($sessionId, $customerSessionBody);
    echo("session closed:\t\t\t" . $sessionId . "\n");
} catch (Exception $e) {
    echo 'Exception when calling IntegrationAPIApi->updateCustomerSession: ', $e->getMessage(), PHP_EOL;
}

?>
```
